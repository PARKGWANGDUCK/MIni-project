package miniProject.getLunch;

import java.sql.Connection;

public class DBUtils {
	private static final String DB_URL = "jdbc:mysql://localhost:3306/";
//	private static final String DRIVER_NAME = "com.mtsql.cj.jdbc.Driver"; // D만 대문자
	private static final String DATABASE_NAME = "randomLunch";
	private static final String USER = "root";
	private static final String PASSWORD = "skffkqhd831!";
	
	public static Connection getConnection() throws SQLException {
//		Connection connection = DriverManager.getConnection(DB_URL + DATABASE_NAME, USER, PASSWORD);
//		return connection;
		
//		Class.forName(DRIVER_NAME); // Driver 로딩, JDBC 4.0이후로 모든 드라이버들은 클래스패스에서 자동으로 로딩됨
		return DriverManager.getConnection(DB_URL + DATABASE_NAME, USER, PASSWORD);
		
	}
public static void dropAndCreateTable() {
		
		final String dropTableQuery = "DROP TABLE IF EXISTS todo";
		
		// Statement : Query 전달 객체
		Connection conn;
		Statement stmt;
		try {
			conn = getConnection();
			stmt = conn.createStatement();
			stmt.execute(dropTableQuery); // 진행 시켜
			
			final String createTableQuery = 
		            "CREATE TABLE todo (" +
		            "id INT(5) unsigned NOT NULL AUTO_INCREMENT," +
		            "title VARCHAR(255)," +
		            "description VARCHAR(255)," +
		            "due_date DATE," +
		            "is_completed BOOLEAN DEFAULT false," +
		            "PRIMARY KEY (id))";
			
			stmt.execute(createTableQuery);
			System.out.println("Table has created.");
		} catch (SQLException e) {
			e.printStackTrace();
		}
	}
}
